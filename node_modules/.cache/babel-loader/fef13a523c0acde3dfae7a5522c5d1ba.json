{"ast":null,"code":"var _jsxFileName = \"/home/atestee/Desktop/BP/leaflet-demo/src/components/LinkPicker.js\";\nimport { Component } from \"react\";\nimport { Accordion, AccordionDetails, AccordionSummary, Checkbox, Typography } from \"@mui/material\";\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport './LinkPicker.css';\nimport routes from \"../data/links.json\";\nimport L from \"leaflet\";\nimport boundary from \"../result/boundary.geojson\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class LinkPicker extends Component {\n  constructor(props) {\n    super(props);\n    this.routeTypesGrouped = {};\n    this.map = null;\n    this.routesGeojson = {\n      \"type\": \"FeatureCollection\",\n      \"crs\": {\n        \"type\": \"name\",\n        \"properties\": {\n          \"name\": \"urn:ogc:def:crs:OGC:1.3:CRS84\"\n        }\n      },\n      \"features\": []\n    };\n    this.state = {\n      isCheckAll: {\n        \"tram\": false,\n        \"metro\": false,\n        \"bus\": false,\n        \"funicular\": false\n      },\n      isCheck: {\n        \"tram\": [],\n        \"metro\": [],\n        \"bus\": [],\n        \"funicular\": []\n      },\n      isExpanded: {\n        \"tram\": false,\n        \"metro\": false,\n        \"bus\": false,\n        \"funicular\": false\n      }\n    };\n    Object.keys(routes).map(t => this.routeTypesGrouped[t] = Object.keys(routes[t]));\n  }\n\n  componentDidMount() {\n    this.map = L.map('map', {\n      center: [50.07501157760184, 14.416865286199549],\n      zoom: 13,\n      layers: [L.tileLayer('https://stamen-tiles.a.ssl.fastly.net/{id}/{z}/{x}/{y}.png', {\n        attribution: 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, under <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a>. Data by <a href=\"http://openstreetmap.org\">OpenStreetMap</a>, under <a href=\"http://www.openstreetmap.org/copyright\">ODbL</a>.',\n        maxZoom: 18,\n        id: 'toner-lite',\n        tileSize: 512,\n        zoomOffset: -1\n      })],\n      preferCanvas: true\n    });\n  }\n\n  componentDidUpdate() {\n    // console.log(this.state.isCheck);\n    this.updateRoutesGeojson(this.state.isCheck); // console.log(JSON.stringify(this.routesGeojson));\n\n    console.log(this.routesGeojson);\n\n    if (this.routesGeojson.features.length > 0) {\n      L.geoJSON(this.routesGeojson, {\n        style: function (feature) {\n          return {\n            color: feature.properties.color\n          };\n        }\n      }).addTo(this.map);\n    }\n  }\n\n  getColor(type, name) {\n    if (type === \"metro\") {\n      if (name === \"A\") {\n        return \"#00FF00\";\n      } else if (name === \"B\") {\n        return \"#FFFF00\";\n      } else if (name === \"C\") {\n        return \"#FF0000\";\n      } else if (type === \"tram\") {\n        return \"#0000FF\";\n      } else if (type === \"bus\") {\n        return \"#FF8000\";\n      } else {\n        return \"#C800FF\";\n      }\n    }\n  }\n\n  handleSelectAllClick(routeTypeName) {\n    this.setState(state => {\n      let newIsCheckAll = { ...state.isCheckAll\n      };\n      let newIsCheck = { ...state.isCheck\n      };\n      newIsCheckAll[routeTypeName] = !state.isCheckAll[routeTypeName];\n\n      if (newIsCheckAll[routeTypeName]) {\n        newIsCheck[routeTypeName] = this.routeTypesGrouped[routeTypeName];\n      } else {\n        newIsCheck[routeTypeName] = [];\n      }\n\n      return {\n        isCheckAll: newIsCheckAll,\n        isCheck: newIsCheck\n      };\n    });\n  }\n\n  handleClick(routeName, routeType) {\n    this.setState(state => {\n      let newIsCheck = { ...this.state.isCheck\n      };\n      let newIsCheckAll = { ...this.state.isCheckAll\n      };\n\n      if (!state.isCheck[routeType].includes(routeName)) {\n        newIsCheck[routeType] = [...newIsCheck[routeType], routeName];\n      } else {\n        newIsCheck[routeType] = [...newIsCheck[routeType].filter(route => route !== routeName)];\n        newIsCheckAll[routeType] = false;\n      }\n\n      return {\n        isCheckAll: newIsCheckAll,\n        isCheck: newIsCheck\n      };\n    });\n  }\n\n  handleExpand(routeType) {\n    this.setState(state => {\n      let newIsExpanded = { ...this.state.isExpanded\n      };\n\n      if (newIsExpanded[routeType]) {\n        newIsExpanded[routeType] = false;\n      } else {\n        Object.keys(newIsExpanded).map(k => newIsExpanded[k] = false);\n        newIsExpanded[routeType] = true;\n      }\n\n      return {\n        isExpanded: newIsExpanded\n      };\n    });\n  }\n\n  updateRoutesGeojson(isCheck) {\n    Object.keys(isCheck).map(routeType => isCheck[routeType].map(route => this.routesGeojson.features.push({\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"route_name\": route,\n        \"route_type\": routeType,\n        \"color\": this.getColor(routeType, route)\n      },\n      \"geometry\": {\n        \"type\": \"LineString\",\n        \"coordinates\": routes[routeType][route]\n      }\n    })));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mainDiv\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"header\",\n        children: \"Route picker\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divWithAccordions\",\n        children: Object.keys(this.routeTypesGrouped).map(routeTypeName => /*#__PURE__*/_jsxDEV(Accordion, {\n          className: \"accordion\",\n          onChange: () => this.handleExpand(routeTypeName),\n          expanded: this.state.isExpanded[routeTypeName],\n          children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n            expandIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 49\n            }, this),\n            \"aria-controls\": \"panel1a-content\",\n            id: \"panel1a-header\",\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              className: \"accordionName\",\n              children: routeTypeName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(AccordionDetails, {\n            className: \"accordionDetails\",\n            children: [Object.keys(this.routeTypesGrouped[routeTypeName]).length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                style: {\n                  padding: 0\n                },\n                onClick: () => this.handleSelectAllClick(routeTypeName),\n                checked: this.state.isCheckAll[routeTypeName]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 45\n              }, this), !this.state.isCheckAll[routeTypeName] ? 'Select All' : 'Unselect All']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rowCheckboxes\",\n              children: Object.values(this.routeTypesGrouped[routeTypeName]).map(route => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"columnCheckboxes\",\n                children: [route, \" \", /*#__PURE__*/_jsxDEV(Checkbox, {\n                  onChange: () => this.handleClick(route, routeTypeName),\n                  checked: this.state.isCheck[routeTypeName].includes(route)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 61\n                }, this)]\n              }, routeTypeName + ' ' + route, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 49\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 33\n          }, this)]\n        }, routeTypeName, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"map\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/atestee/Desktop/BP/leaflet-demo/src/components/LinkPicker.js"],"names":["Component","Accordion","AccordionDetails","AccordionSummary","Checkbox","Typography","ExpandMoreIcon","routes","L","boundary","LinkPicker","constructor","props","routeTypesGrouped","map","routesGeojson","state","isCheckAll","isCheck","isExpanded","Object","keys","t","componentDidMount","center","zoom","layers","tileLayer","attribution","maxZoom","id","tileSize","zoomOffset","preferCanvas","componentDidUpdate","updateRoutesGeojson","console","log","features","length","geoJSON","style","feature","color","properties","addTo","getColor","type","name","handleSelectAllClick","routeTypeName","setState","newIsCheckAll","newIsCheck","handleClick","routeName","routeType","includes","filter","route","handleExpand","newIsExpanded","k","push","render","padding","values"],"mappings":"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","sourcesContent":["import {Component} from \"react\";\nimport {Accordion, AccordionDetails, AccordionSummary, Checkbox, Typography} from \"@mui/material\";\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport './LinkPicker.css'\nimport routes from \"../data/links.json\"\nimport L from \"leaflet\";\nimport boundary from \"../result/boundary.geojson\";\n\nexport class LinkPicker extends Component {\n    routeTypesGrouped = {};\n    map = null;\n\n    routesGeojson = {\n        \"type\": \"FeatureCollection\",\n        \"crs\": { \"type\": \"name\", \"properties\": { \"name\": \"urn:ogc:def:crs:OGC:1.3:CRS84\" } },\n        \"features\": []\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isCheckAll: {\n                \"tram\": false,\n                \"metro\": false,\n                \"bus\": false,\n                \"funicular\": false\n            },\n            isCheck: {\n                \"tram\": [],\n                \"metro\": [],\n                \"bus\": [],\n                \"funicular\": []\n            },\n            isExpanded: {\n                \"tram\": false,\n                \"metro\": false,\n                \"bus\": false,\n                \"funicular\": false\n            }\n        }\n\n        Object.keys(routes).map((t) => (this.routeTypesGrouped)[t] = Object.keys(routes[t]))\n    }\n\n    componentDidMount() {\n        this.map = L.map('map', {\n            center: [50.07501157760184, 14.416865286199549],\n            zoom: 13,\n            layers: [\n                L.tileLayer('https://stamen-tiles.a.ssl.fastly.net/{id}/{z}/{x}/{y}.png', {\n                    attribution: 'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, under <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a>. Data by <a href=\"http://openstreetmap.org\">OpenStreetMap</a>, under <a href=\"http://www.openstreetmap.org/copyright\">ODbL</a>.',\n                    maxZoom: 18,\n                    id: 'toner-lite',\n                    tileSize: 512,\n                    zoomOffset: -1\n                }),\n            ],\n            preferCanvas: true\n        })\n    }\n\n    componentDidUpdate(){\n        // console.log(this.state.isCheck);\n\n        this.updateRoutesGeojson(this.state.isCheck)\n\n        // console.log(JSON.stringify(this.routesGeojson));\n        console.log(this.routesGeojson);\n\n        if (this.routesGeojson.features.length > 0) {\n\n\n            L.geoJSON(this.routesGeojson, {\n                style: function(feature) {\n                    return {color: feature.properties.color};\n                }\n            }).addTo(this.map);\n        }\n    }\n\n    getColor(type, name) {\n        if (type === \"metro\") {\n            if (name === \"A\") {\n                return \"#00FF00\"\n            } else if (name === \"B\") {\n                return \"#FFFF00\"\n            } else if (name === \"C\") {\n                return \"#FF0000\"\n            } else if (type === \"tram\"){\n                return \"#0000FF\"\n            } else if (type === \"bus\"){\n                return \"#FF8000\"\n            } else {\n                return \"#C800FF\"\n            }\n        }\n    }\n\n    handleSelectAllClick(routeTypeName) {\n        this.setState((state) => {\n            let newIsCheckAll = { ...state.isCheckAll };\n            let newIsCheck = { ...state.isCheck };\n            newIsCheckAll[routeTypeName] = !state.isCheckAll[routeTypeName];\n\n            if (newIsCheckAll[routeTypeName]) {\n                newIsCheck[routeTypeName] = this.routeTypesGrouped[routeTypeName];\n            } else {\n                newIsCheck[routeTypeName] = [];\n            }\n\n            return {\n                isCheckAll: newIsCheckAll,\n                isCheck: newIsCheck\n            };\n        });\n    }\n\n    handleClick(routeName, routeType){\n        this.setState((state) => {\n            let newIsCheck = { ...this.state.isCheck };\n            let newIsCheckAll = { ...this.state.isCheckAll };\n\n            if (!state.isCheck[routeType].includes(routeName)) {\n                newIsCheck[routeType] = [...newIsCheck[routeType], routeName];\n            } else {\n                newIsCheck[routeType] = [...newIsCheck[routeType].filter(route => route !== routeName)];\n                newIsCheckAll[routeType] = false;\n            }\n\n            return {\n                isCheckAll: newIsCheckAll,\n                isCheck: newIsCheck\n            };\n        });\n    }\n\n    handleExpand(routeType) {\n        this.setState((state) => {\n            let newIsExpanded = {...this.state.isExpanded};\n\n            if (newIsExpanded[routeType]) {\n                newIsExpanded[routeType] = false;\n            } else {\n                Object.keys(newIsExpanded).map(k => newIsExpanded[k] = false);\n                newIsExpanded[routeType] = true;\n            }\n\n            return {\n                isExpanded: newIsExpanded\n            };\n        });\n\n    }\n\n    updateRoutesGeojson(isCheck) {\n        Object.keys(isCheck).map((routeType) => (\n            isCheck[routeType].map((route) => (\n                this.routesGeojson.features.push(\n                    {\n                        \"type\": \"Feature\",\n                        \"properties\": {\n                            \"route_name\" : route,\n                            \"route_type\" : routeType,\n                            \"color\" : this.getColor(routeType, route)\n                        },\n                        \"geometry\": {\n                            \"type\": \"LineString\",\n                            \"coordinates\": routes[routeType][route]\n                        }\n                    }\n                )\n            ))\n        ))\n    }\n\n    render() {\n        return (\n            <div className=\"mainDiv\">\n                <h2 className=\"header\">Route picker</h2>\n                <div className=\"divWithAccordions\">\n                    {\n                        Object.keys(this.routeTypesGrouped).map((routeTypeName) => (\n                            <Accordion className=\"accordion\" key={ routeTypeName } onChange={() => this.handleExpand(routeTypeName)} expanded={this.state.isExpanded[routeTypeName]}>\n                                <AccordionSummary\n                                    expandIcon={<ExpandMoreIcon />}\n                                    aria-controls=\"panel1a-content\"\n                                    id=\"panel1a-header\"\n                                >\n                                    <Typography className=\"accordionName\">{routeTypeName}</Typography>\n                                </AccordionSummary>\n                                <AccordionDetails className=\"accordionDetails\">\n                                    {Object.keys(this.routeTypesGrouped[routeTypeName]).length > 1 &&\n                                        <div>\n                                            <Checkbox style={{ padding: 0}} onClick={() => this.handleSelectAllClick(routeTypeName)} checked={this.state.isCheckAll[routeTypeName]}/>\n                                            { !this.state.isCheckAll[routeTypeName] ? 'Select All' : 'Unselect All' }\n                                        </div>\n                                    }\n                                    <div className=\"rowCheckboxes\">\n                                        {\n                                            Object.values(this.routeTypesGrouped[routeTypeName]).map((route) => (\n                                                <div className=\"columnCheckboxes\" key={ routeTypeName + ' ' + route }>\n                                                    {/*{route} <Checkbox onChange={() => {handleClick(route, routeTypeName); setRoutesGeojson(isCheck)}} checked={isCheck[routeTypeName].includes(route)} />*/}\n                                                    {route} <Checkbox onChange={() => this.handleClick(route, routeTypeName)} checked={this.state.isCheck[routeTypeName].includes(route)} />\n                                                </div>\n                                            ))\n                                        }\n                                    </div>\n                                </AccordionDetails>\n                            </Accordion>\n                        ))\n                    }\n                </div>\n                <div className=\"column\">\n                    <div id={\"map\"}></div>\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}